<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }

        .box-container {
            margin: 0 auto;
            padding: 10px;
            width: 100%;
            /* background-color: rgba(178, 217, 196, 0.5); */
            border-radius: 15px;
            overflow: auto;
            border-radius: 15px !important;
        }

        .box-container ::-webkit-scrollbar {
            display: none;
        }

        .sender-name {
            font-family: Roboto;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            line-height: 18px;
            color: black;
            text-decoration: none;
        }

        .title {
            margin-top: 8px;
            border-radius: 15px !important;
        }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

</head>

<body style="height: 100%;   background-color: rgba(178, 217, 196, 0.5); padding: 10px;">
    <div id="box-chat-template" class="chat-popup box-container outer box-chat-template js-loop"
        style="padding-top :10px; padding-bottom: 10px;"> </div>
    <script>
        const data = [
            {
                senderName: 'Vũ Thị Hà ',
                message: ' 0982827925 Da nám có dùng được ko, tư vấn cho chị'
            },
            {
                senderName: 'Lê Hoa ',
                message: ' 0336665015 Chị bị da khô ráp sau sinh dùng hết 1 hộp thì đỡ nhiều rồi, giờ lấy thêm có được khuyến mãi không em'
            },
            {
                senderName: 'Thu Loan ',
                message: ' 0372941880 Cho chị 2 hộp tặng 1 tặng thêm son'
            },
            {
                senderName: 'Minh Tran ',
                message: ' da đen lâu năm có trắng không chị, tư vấn miễn phí cho em với 0336521482 '
            },
            {
                senderName: 'Thư Nguyễn ',
                message: ' 0387510788 Cần Tư Vấn Miễn Phí'
            },
            {
                senderName: 'Ngát Nguyễn ',
                message: ' 0869229903 Chị Đặt 3 hộp tặng 2 tặng thêm son'
            },
            {
                senderName: 'Thanh Nhớ ',
                message: ' che được đồi mồi ko em  tư vấn chị 0372098741'
            },
            {
                senderName: 'Thu Huyền ',
                message: ' 0367883973 tư vấn cho chị với e'
            },
            {
                senderName: 'Nguyen Phuong ',
                message: ' 0344330764 tàn nhang và đồi mồi có che hết không em, tư vấn chị với'
            },
            {
                senderName: 'Trần Thị Huyền ',
                message: ' 0983156089 chị lấy 3 hộp tặng 2'
            },
            {
                senderName: 'Vũ Thị Hà ',
                message: ' 0824187976 Chị dùng 2 hộp tan sạch nám rồi thì có cần dùng tiếp không em, có sợ bị lên lại không em'
            },
            {
                senderName: 'Nho Nguyen ',
                message: ' 0862541321 lấy chị 2 hộp khuyến mãi tặng kem chống nắng nhé '
            },
            {
                senderName: 'Hoan Nguyễn ',
                message: ' 0988427371 khách em dùng rất thích, em lấy cho spa số lượng lớn thì có giá sỉ không chị'
            },
            {
                senderName: 'Lê Phương Thảo ',
                message: ' Chị tư vấn em với ạ, tàn nhang 0982827925 '
            },
            { senderName: 'Hà Vũ ', message: ' 0336665015 Cần Tư vấn miễn phí' },
            {
                senderName: 'Hai Au ',
                message: ' 0372941880 Mua 2 tặng 1 em nhé, tặng chị thêm son'
            },
            {
                senderName: 'Le Thi Xoai ',
                message: ' 0351241470 Lấy cô 2 hộp tặng 1'
            },
            {
                senderName: 'Paniya ',
                message: ' tu van chi bi doi moi, da kho 0398415261'
            },
            {
                senderName: 'Minh Minh ',
                message: ' 0344330764  da tàn nhang sau sinh sinh, da sạm và rất khô chị cho em 2 hộp tặng 1 dùng thử ạ'
            },
            {
                senderName: 'Phạm Hải Yến ',
                message: ' tư vấn e nám li ti 2 bên gò má ạ 0988451634'
            },
            {
                senderName: 'Nho Hang ',
                message: '  da dầu và nhạy cảm chị tư vấn cho em với  0372098741'
            },
            {
                senderName: 'Hoài An ',
                message: '  0336665015 Tư vấn miễn phí cho chị'
            },
            {
                senderName: 'Trần Thị Huyền ',
                message: ' 0983156089 tư vấn cho chị  với em'
            },
            {
                senderName: 'Hoan ',
                message: ' 0988427371  Cô bị da khô, hay nứt nẻ  tư vấn cô'
            },
            {
                senderName: 'Ngát Nguyễn ',
                message: ' 0869229903 Tư vấn miễn phí'
            },
            {
                senderName: 'Thư Nguyễn ',
                message: ' 0387510788  Tư Vấn Miễn Phí cho em'
            }
        ]
        const size = 6
        window.onload = () => {
                return loadMessage(size)
        }

        const returnView = (number) => {
            let messageTemplate = ''
            const customData = data;
            customData.slice(0, number).map((e, i) =>
                messageTemplate += `<div id="div${i}" class="title">
                                <a href="#" id="${i}" class="next sender-name text-dark">${e.senderName} :</a>
                                <span>${e.message}</span>
                            </div>`
            )
            return messageTemplate;
        }
        const loadMessage = (slice) => {
            document.getElementById("box-chat-template").innerHTML = returnView(slice);
        }

        const loading = () => {
            let count = 0;
            let next = size;
            let isFirstime = true;
            setInterval(() => {
                console.log('before',{next});
                const newMessage = `<div id="div${next}" class="title">
                            <a href="#" id="${next}" class="next sender-name text-dark">${data[next].senderName} :</a>
                            <span>${data[next].message}</span>
                            </div>`
                    $("#box-chat-template").append(newMessage)
                let nextHeight = 0;
              
                    nextHeight = $(`#div${next}`).height();
        
                $('html,body').animate({ scrollTop: nextHeight }, {
                    duration: 1000,
                    complete: () => {
                        isFirstime = false;
                    }
                });
                console.log('data.length ', data.length);
                $(`#div${count}`).hide('slow', () => {
                    $(`#div${count}`).remove();
                    count++;
                    next++;
                    if (next === data.length) {
                        next = 0;
                    }
                    if (count === data.length) {
                        count = 0;
                    }

                })
                clearInterval();
            }, 2000)
        }
        loading()
    </script>
</body>

</html>
